#!/usr/bin/env archidsl

model(
  "Archisurance",
  version: "3.1.1",
  documentation: "An example of a fictional Insurance company."
) do |model|
  # property(Property1: "Value of Property 1")
  # property(Property2: "Value of Property 2")
  properties(
    Property1: "Value of Property 1",
    Property2: "Value of Property 2"
  )

  folder("Business",
    type: "business") do
    puts "#{self.class} parent Business == #{__parent.name} #{__parent.type} [] == #{__parent.organizations.to_a}"
    folder("Actors") do
      puts "#{self.class} parent Actors == #{__parent.name} #{__parent.type} [] == #{__parent.organizations.to_a}"
      business_interface(id: "1544", name: "mail")
      business_interface(id: "1540", name: "phone")
      business_interface(id: "1542", name: "GIM")
      business_interface(id: "1538", name: "e-mail")
      business_interface(id: "1536", name: "phone")
      business_role(id: "528", name: "Customer's Bank")
      business_role(id: "521", name: "Customer")
      business_role(id: "507", name: "Intermediary")
      business_role(id: "514", name: "Insurer")
      business_role(id: "1368", name: "Insurant")
      business_collaboration(id: "733", name: "Negotiation")
      business_collaboration(id: "740", name: "Contracting")
      business_collaboration(id: "1546", name: "collaboration")
      business_actor(id: "345", name: "HRM")
      business_actor(id: "338", name: "Product Development")
      business_actor(id: "296", name: "Front Office")
      business_actor(id: "289", name: "Intermediary Relations")
      business_actor(id: "282", name: "Customer Relations")
      business_actor(id: "331", name: "Finance")
      business_actor(id: "352", name: "Document Processing SSC")
      business_actor(id: "324", name: "Back Office")
      business_actor(id: "303", name: "Home  &amp;  Away")
      business_actor(id: "310", name: "Car")
      business_actor(id: "317", name: "Legal Aid")
      business_actor(id: "275", name: "Archisurance") do
        property(Property1: "Another Value of Property 1")
        property(Property2: "Another Value of Property 2")
        property(Property3: "Value of Property 3")
      end
      business_actor(id: "1337", name: "Client")
      business_actor(id: "402", name: "Board")
      business_actor(id: "409", name: "Director of Sales")
      business_actor(id: "423", name: "Director of Finance")
      business_actor(id: "416", name: "Director of Operations")
    end
    folder("Functions") do
      puts "#{self.class} parent Functions == #{__parent.name} #{__parent.type} [] == #{__parent.organizations.to_a}"
      business_function(id: "495", name: "Asset Management")
      business_function(id: "483", name: "Contracting")
      business_function(id: "471", name: "Maintaining Intermediary Relations")
      business_function(id: "477", name: "Maintaining Customer Relations")
      business_function(id: "489", name: "Claims Handling")
      business_function(id: "501", name: "Financial Handling")
    end
    folder("Information") do
      puts "#{self.class} parent Information == #{__parent.name} #{__parent.type} [] == #{__parent.organizations.to_a}"
      representation(id: "676", name: "Claim Form")
      business_object(id: "796", name: "Legal aid  Insurance Policy")
      business_object(id: "792", name: "Insurance Request")
      business_object(id: "795", name: "Liability  Insurance Policy")
      business_object(id: "675", name: "Insurance Policy")
      business_object(id: "674", name: "Customer File")
      business_object(id: "673", name: "Damage Claim")
      business_object(id: "791", name: "Customer")
      business_object(id: "793", name: "Travel  Insurance Policy")
      business_object(id: "794", name: "Car Insurance Policy")
      business_object(id: "803", name: "Home Insurance Policy")
    end
    folder("Processes") do
      puts "#{self.class} parent Processes == #{__parent.name} #{__parent.type} [] == #{__parent.organizations.to_a}"
      business_interaction(id: "722", name: "Check and  Sign Contract")
      business_interaction(id: "721", name: "Formalise Request")
      business_event(id: "651", name: "Damage Occured")
      business_event(id: "650", name: "Request for Insurance")
      business_process(id: "1302", name: "Inform Customer")
      business_process(id: "1311", name: "Collect Premium")
      business_process(id: "612", name: "Create Contract")
      business_process(id: "556", name: "Handle Claim")
      business_process(id: "572", name: "Accept")
      business_process(id: "580", name: "Valuate")
      business_process(id: "588", name: "Pay")
      business_process(id: "564", name: "Register")
      business_process(id: "596", name: "Close Contract")
    end
    folder("Products") do
      puts "#{self.class} parent Products == #{__parent.name} #{__parent.type} [] == #{__parent.organizations.to_a}"
      value(id: "1250", name: "Be Insured")
      contract(id: "1239", name: "Travel Insurance Policy")
      business_service(id: "1208", name: "Premium Payment Service")
      business_service(id: "1202", name: "Claim Registration Service")
      business_service(id: "1214", name: "Customer Information Service")
      business_service(id: "1196", name: "Insurance Application Service")
      business_service(id: "1226", name: "Claims Payment Service")
      business_service(id: "1220", name: "Customer data mutation Service")
    end
  end
  folder("Application", type: "application") do
    folder("Applications") do
      application_function(id: "885", name: "Policy Creation")
      application_function(id: "909", name: "Store Policy")
      application_function(id: "891", name: "Calculate Risk")
      application_function(id: "897", name: "Calculate Premium")
      application_function(id: "903", name: "Create Policy")
      application_component(id: "1399", name: "Financial Application")
      application_component(id: "1393", name: "CRM System")
      application_component(id: "861", name: "Policy Data Management")
      application_component(id: "843", name: "Home &amp; Away Policy Administration")
      application_component(id: "855", name: "Customer Data  Access")
      application_component(id: "849", name: "Risk Assessment")
      application_component(id: "867", name: "Claim Data Management")
      application_component(id: "1793", name: "Call center application")
      application_component(id: "1800", name: "Web portal")
      application_component(id: "1813", name: "Bank System")
      application_service(id: "1414", name: "Claim info_serv")
      application_service(id: "1407", name: "CIS") do
        documentation "Customer Information Service"
      end
      application_service(id: "935", name: "Policy Creation Service")
    end
    folder("Data") do
      data_object(id: "946", name: "Insurance Request Data")
      data_object(id: "838", name: "Insurance Policy Data")
      data_object(id: "837", name: "Customer File Data")
      data_object(id: "839", name: "Damage Claim Data")
    end
  end
  folder("Technology", type: "technology") do
    network(id: "1089", name: "LAN")
    network(id: "1101", name: "LAN")
    network(id: "1095", name: "BIBIT")
    device(id: "1071", name: "Admin Server")
    device(id: "1065", name: "NAS File Server")
    device(id: "1053", name: "Unix Server")
    device(id: "1059", name: "Unix Server")
    device(id: "1882", name: "BIBIT Server")
    system_software(id: "1022", name: "CICS")
    system_software(id: "1016", name: "DBMS")
    system_software(id: "1010", name: "Message Queing")
    system_software(id: "1870", name: "Financial Software")
    node(id: "998", name: "Firewall")
    node(id: "1004", name: "Firewall")
    node(id: "986", name: "Mainframe")
    node(id: "992", name: "Unix Server Farm")
    infrastructure_service(id: "1110", name: "File Service")
    infrastructure_service(id: "1116", name: "Network Service")
    infrastructure_service(id: "1128", name: "Database Service")
    infrastructure_service(id: "1455", name: "Claim Files Service")
    infrastructure_service(id: "1462", name: "Customer File Service")
  end
  folder("Motivation", type: "motivation") do
    principle(id: "f5674126", name: "Client Satisfaction Goal")
    principle(id: "3938617c", name: "One Stop Principle")
    principle(id: "67316f1f", name: "Treatment Time Principle")
    principle(id: "b56d54a6", name: "Costs Goal")
    principle(id: "3764dcef", name: "Occupancy Principle")
    principle(id: "712d4eec", name: "Licence Principle")
    principle(id: "66a2171b", name: "TCO Goal")
    principle(id: "af0e8c76", name: "Component Principle")
    principle(id: "3db08b5c", name: "Infrastructure Principle")
  end
  folder("Implementation &amp; Migration", type: "implementation_migration")
  folder("Connectors", type: "connectors")
  folder("Relations", type: "relations") do
    folder("Business") do
      folder("Processes") do
        access("create/ update", source: "564", target: "674")
        access("create/ update", source: "564", target: "673")
        access("crud", source: "580", target: "673")
        access("read", source: "572", target: "675")
        access("read", source: "572", target: "673", accessType: :read)
        access("read", source: "572", target: "674", accessType: :read)
        realization(source: "1311", target: "1208")
        realization(source: "556", target: "1202")
        realization(source: "1302", target: "1214")
        realization(source: "596", target: "1196")
        realization(source: "556", target: "1226")
        realization(source: "588", target: "1226")
        realization(source: "564", target: "1202")
        realization(source: "572", target: "1214")
        realization(source: "580", target: "1214")
        triggering(source: "651", target: "564")
        triggering(source: "1302", target: "1311")
        triggering(source: "564", target: "572")
        triggering(source: "556", target: "1302")
        triggering(source: "721", target: "612")
        triggering(source: "572", target: "580")
        triggering(source: "580", target: "588")
        triggering(source: "650", target: "721")
        access("update", source: "588", target: "674")
        triggering(source: "612", target: "722")
        access("update", source: "588", target: "674")
      end
      folder("Actors") do
        aggregation(source: "733", target: "521")
        aggregation(source: "733", target: "507")
        aggregation(source: "733", target: "514")
        aggregation(source: "740", target: "507")
        aggregation(source: "740", target: "514")
        aggregation(source: "740", target: "521")
        assignment(source: "275", target: "514")
        assignment(source: "514", target: "612")
        assignment(source: "733", target: "721")
        assignment(source: "514", target: "556")
        assignment(source: "1337", target: "1368")
        association(source: "416", target: "310")
        association(source: "416", target: "317")
        association(source: "416", target: "352")
        association(source: "409", target: "282")
        association(source: "402", target: "345")
        association(source: "402", target: "409")
        association(source: "409", target: "289")
        association(source: "423", target: "331")
        association(source: "402", target: "423")
        association(source: "402", target: "338")
        association(source: "416", target: "303")
        association(source: "402", target: "416")
        association(source: "521", target: "1250")
        flow("Claim form (electronic)", source: "352", target: "282")
        flow("claim form (paper)", source: "282", target: "352")
        flow("claims", source: "521", target: "477")
        flow("confirm", source: "331", target: "324")
        flow("confirmation", source: "528", target: "331")
        flow("cust. info", source: "507", target: "471")
        flow("Customer Information", source: "521", target: "507")
        flow("electronic contracts", source: "352", target: "324")
        flow("Electronic Contracts", source: "352", target: "289")
        flow(source: "528", target: "501")
        flow(source: "345", target: "324")
        flow(source: "324", target: "345")
        flow(source: "324", target: "338")
        flow(source: "338", target: "324")
        flow("Intermediary Contracts", source: "289", target: "352")
        flow("paper contracts", source: "324", target: "352")
        flow("payment", source: "331", target: "528")
        flow("payment order", source: "324", target: "331")
        flow("Product Information", source: "507", target: "521")
        serving("call", source: "1536", target: "521")
        serving("write", source: "1538", target: "521")
        serving("write", source: "1544", target: "521")
        association(source: "282", target: "1536")
        association(source: "1538", target: "282")
        association(source: "1544", target: "352")
        serving(source: "1540", target: "507")
        serving(source: "1542", target: "507")
        association(source: "1540", target: "289")
        association(source: "1542", target: "289")
        aggregation(source: "1546", target: "352")
        aggregation(source: "1546", target: "528")
        assignment(source: "740", target: "722")
        triggering(source: "521", target: "650")
      end
      folder("Information") do
        aggregation(source: "791", target: "674")
        aggregation(source: "675", target: "792")
        aggregation(source: "675", target: "673")
        composition(source: "674", target: "673")
        composition(source: "674", target: "675")
        composition(source: "674", target: "792")
        realization(source: "676", target: "673")
        specialization(source: "796", target: "675")
        specialization(source: "793", target: "675")
        specialization(source: "795", target: "675")
        specialization(source: "803", target: "675")
        specialization(source: "794", target: "675")
      end
      folder("Functions") do
        flow("asset info", source: "495", target: "483")
        flow("claim info", source: "489", target: "521")
        flow("contract info", source: "483", target: "471")
        flow("contract info.", source: "483", target: "495")
        flow("customer information", source: "471", target: "483")
        flow(source: "489", target: "501")
        flow(source: "489", target: "477")
        flow(source: "495", target: "501")
        flow(source: "477", target: "489")
        flow(source: "501", target: "489")
        flow(source: "501", target: "528")
        flow("insurance info", source: "477", target: "521")
        flow("money", source: "501", target: "495")
        flow("product info.", source: "471", target: "507")
      end
      folder("Products") do
        association(source: "1250", target: "1208")
        serving(source: "1226", target: "521")
        serving(source: "1202", target: "521")
        serving(source: "1214", target: "521")
        serving(source: "1196", target: "521")
        serving(source: "1208", target: "521")
        serving(source: "1202", target: "1368")
        serving(source: "1196", target: "564")
        serving(source: "1220", target: "564")
        serving(source: "1208", target: "588")
        serving(source: "1226", target: "1368")
        serving(source: "1214", target: "1368")
        serving(source: "1407", target: "612")
      end
    end
    folder("Application") do
      folder("Data") do
        realization(source: "837", target: "674")
        realization(source: "839", target: "673")
        realization(source: "838", target: "794")
        realization(source: "946", target: "792")
        realization(source: "838", target: "793")
        realization(source: "838", target: "795")
        realization(source: "838", target: "796")
        realization(source: "838", target: "803")
      end
      folder("Applications") do
        access(source: "891", target: "946", accessType: :read)
        access(source: "867", target: "839")
        access(source: "861", target: "838")
        realization(source: "861", target: "1220")
        realization(source: "1393", target: "1196")
        realization(source: "1399", target: "1208")
        serving(source: "935", target: "722")
        serving(source: "1414", target: "721")
        access(source: "855", target: "837")
        access(source: "909", target: "837")
        access(source: "903", target: "838")
        composition(source: "843", target: "855")
        composition(source: "843", target: "861")
        realization(source: "861", target: "1414")
        realization(source: "1393", target: "1407")
        realization(source: "843", target: "935")
        triggering(source: "891", target: "897")
        triggering(source: "897", target: "903")
        triggering(source: "903", target: "909")
        serving(source: "1414", target: "1399")
        serving(source: "1407", target: "861")
        serving(source: "1793", target: "1800")
        serving(source: "1393", target: "1800")
        serving(source: "849", target: "1800")
        serving(source: "1399", target: "843")
        serving(source: "855", target: "849")
        serving(source: "855", target: "1793")
        serving(source: "1813", target: "1399")
      end
    end
    folder("Technology") do
      realization(source: "1065", target: "1110")
      realization(source: "998", target: "1116")
      realization(source: "986", target: "1128")
      realization(source: "986", target: "1455")
      realization(source: "1065", target: "1462")
      realization(source: "1882", target: "1813")
      realization(source: "1870", target: "1399")
      serving(source: "1455", target: "1393")
      serving(source: "1455", target: "861")
      serving(source: "1462", target: "861")
      serving(source: "1462", target: "1399")
      association(source: "986", target: "1089")
      association(source: "1089", target: "998")
      association(source: "998", target: "1095")
      association(source: "1095", target: "1004")
      association(source: "1004", target: "1101")
      association(source: "1101", target: "1071")
      association(source: "1089", target: "1065")
      association(source: "992", target: "1089")
      association(source: "1101", target: "1882")
    end
  end

  # business_process(id: "564", name: "Register")
  # Possible ways to reference this:
  # model["564"]
  # business_process["Register"]
  # business_object(id: "674", name: "Customer File")
  # business_object(id: "673", name: "Damage Claim")
  # business_process(id: "572", name: "Accept")
  # business_process(id: "580", name: "Valuate")
  # business_object(id: "675", name: "Insurance Policy")

  # access("create/ update", source: "564", target: "674")
  # Ways to express this:
  # access("create/ update", source: "564", target: "674")
  # access("create/ update", source: business_process["Register"], target: business_object["Customer File"])
  # business_process["Register"].accesses(business_object["Customer File"])
  # access("create/ update", source: "564", target: "673")
  # access("crud", source: "580", target: "673")
  # access("read", source: "572", target: "675")
  # access("read", source: "572", target: "673", accessType: :read)
  # business_process["Accept"].accesses(business_object["Damage Claim"], accessType: :read)
  # access("read", source: "572", target: "674", accessType: :read)
end
